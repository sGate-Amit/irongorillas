!function(t){"use strict";function n(n,a=!1){const c=n.closest(".dscf7-captcha-container"),e=n.attr("id"),i=c.find('input[type="text"][name="'+e+'"]'),d=i.attr("class").replace("wpcf7-form-control wpcf7-text wpcf7-validates-as-required","").trim();t.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"dscf7_refreshcaptcha",tagname:e,ds_cf7_nonce:ajax_object.nonce,custom_class:d},beforeSend:function(){a?(c.find(".dscf7_captcha_reload_icon").show(),c.find(".dscf7_captcha_icon").hide()):(c.find(".dscf7_captcha_reload_icon").hide(),c.find(".dscf7_captcha_icon").show())},success:function(n){if("Nonce verification failed"===n)return void alert("Security check failed. Please refresh the page and try again.");const a=t("<div>").html(n),e=a.find(".dscf7_lt").html(),d=a.find('input[name^="dscf7_hidden_val1"]').val(),f=a.find('input[name^="dscf7_hidden_val2"]').val(),s=a.find('input[name^="dscf7_hidden_action"]').val(),o=a.find("label").text(),l=a.find('input[type="text"]').attr("id"),r=a.find('input[type="text"]').attr("aria-label");c.find(".dscf7_lt").html(e),c.find('input[name^="dscf7_hidden_val1"]').val(d),c.find('input[name^="dscf7_hidden_val2"]').val(f),c.find('input[name^="dscf7_hidden_action"]').val(s),c.find("label").text(o),i.attr("id",l),i.attr("aria-label",r),i.val("")},error:function(t,n,a){alert("Failed to refresh CAPTCHA. Please try again later.")},complete:function(){a&&(c.find(".dscf7_captcha_reload_icon").hide(),c.find(".dscf7_captcha_icon").show()),n.attr("href","javascript:void(0);")}})}function a(t,n,a){const c=t.val().trim();let e="";if(c){e=c.split(/\s+/).filter((t=>t.length>0)).map((t=>" class:"+t)).join("")}n.val(a+e+"]")}t(document).on("click",".dscf7_refresh_captcha",(function(a){a.preventDefault(),n(t(this),!0)})),document.addEventListener("wpcf7submit",(function(a){t(a.target).find(".dscf7_refresh_captcha").each((function(){n(t(this),!1)}))}),!1),t(document).ready((function(){const n=t('input[name="classname"]');if(n.length){const t=n.closest(".control-box").siblings(".insert-box").find("input.tag");if(t.length){const c=t.val().match(/\[dscf7captcha\s+([^\s\]]+)/),e=c?"[dscf7captcha "+c[1]:t.val();n.on("input",(function(){a(n,t,e)})),a(n,t,e)}}}))}(jQuery);